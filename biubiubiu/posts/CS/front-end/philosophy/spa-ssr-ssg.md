---
title: SPA SSR SSG
icon: creative
date: 2023-01-17
category: 
  - 前端基础
  - 日记
---

大概不是我第一次看着这些词，但是在我思考字符串，还有游戏的客户端和服务端的时候...虽然我还啥都没做出来，但是有了些理解。

在最古早的 php jsp 时代，使用的就是 SSR ，但这时的 SSR 十分...简陋，只是单纯的内容的单向展示，而没有多少交互。而之后，web 2.0 以 ajax 的出现作为代表，网页、网站的功能开始变得丰富，就像一个应用 SPA，要用户进行更多交互，让用户有更多操作，CSR 也就不可避免。

SSR 与 CSR 都各有优缺点，在具体 bb 那些有的没的之前，要提醒一下，这两者也并不冲突，十分常见的一种做法是，首屏加载使用 SSR ，而之后有后续操作再去搞 CSR，这被叫做同构渲染。SSR 在展示静态文本的速度与浏览器 SEO 上的优势，CSR 在提供更多动态交互与复杂操作上的优化，是可以全都要的，只不过可能要多学点东西。

### 文本 & 检索

在想要做“查询”这个操作的时候，文字、符号，这些东西在现在依旧有着不可替代的作用，虽然拍照识物、听歌识曲，等等依赖机器学习的技术在不断发展（其实他们也是通过往这些东西上打标签的方式实现的，只不过是交给机器去做，省去人记忆、转换的功夫），但文字符号现在依旧是人能把握的最有效的检索方式。

而在这方面 SSR 被请求后给出的就是一个没有太多难以识别的，已经渲染、展开的、文本化的 html。 SPA 像一个应用，一个可以玩可以搞骚操作但也因此难以被检索的小软件，而 SSR 所做的，就是把这个应用展开展平成容易检索的文本。(但我并不觉得 SPA 的 SEO 会是问题...那些搜索引擎的爬虫现在都很厉害的吧，有些只是不想而已..，再另外，就比如百度，你在技术上做 SEO 有用吗，直接买点排名不是更快更容易见效；再再另外，现在会用搜索引擎查资料的...真的，好像，变少了)

SSG 就更不用说了，被请求后渲染都不用渲的，因为人家本来就是纯静态的 html 文件。

### 服务端做了什么？

这是我在做那个网盘的 demo ，还有想象游戏服务端的时候在思考的问题。

- 网盘 & 云
  - 说是网盘，其实就是一个，个人的远程计算机，写个小界面然后通过 web 相关的技术在网络上暴露了一个 Linux 的文件系统。
  - 为什么会想要一个远程的文件系统呢？因为我们想要在任何地方，任何设备上，都能够访问到我们的文件，而不是只能在一台电脑上。
  - 本地、私有的储存好处是私有，没有安全、网络传输、权限之类的烦恼，但坏处也是私有；一个远程的储存服务好处是可以多终端访问，这很神奇，之后的共享、协作、当参与的人多起来之后，还有版本控制、权限管理...这就不再仅仅是“储存”这样一个普通的动作了。服务端做的一个很重要的事情，是协调、协作、同步。

- 游戏
  - 在上面的叙述中我们理解到了服务端的作用，那是一个协调、协作、同步的角色。不知道你们有没有遇到那种...在笔记本（就是纸质的本子）上和别人画东西来玩的玩法，甚至有一个同学专门用一个小本本当做服务器，然后让大家一起在上面玩多人 rpg 的。。
  > 但在bb之前我还是想提一下游戏完全可以是单人的，也同样可以多人在一台机器上玩，而且单机游戏很多也很好玩。
  - 其实在写动画和那个小的物理模型的时候，也意识到了计算机的暴力...只为实现一个碰撞检测，每一帧就动不动要成千上万次的计算。也因此，这种需要暴力计算的游戏可能也算是最先遇到性能的问题的，而这种游戏想要做成多人游戏，也是最先遇到网络传输的问题的。互联网相关的技术...在这方面其实并不怎么先进。
    - 具体而言，传输、网络协议方面肯定要做的是长连接。
    - 服务、同步的具体实现方面，也有两个选择，一个是均质的帧同步，一个是事件同步。
      - 而在这里，就让我想到了 SSR 和 CSR(SPA) 的区别。事件同步可以将一部分计算处理放到客户端，等计算到特殊事件时再上传，这样可以将服务端的一部分能力与压力转移到客户端——这是个很微妙的抉择: 压力只是转移而不是消除，而压力同时也是能力与权力，将计算下放到客户端...谁知道有没有小机灵鬼会给自己的客户端动点手脚呢。

(越看越觉得这堆玩意就是纯纯的没事找事干，人家打游戏卡个半秒钟是确实能气死，但是这边搞的最多也就点点屏幕刷个视频看个文档，那点差别有必要吗。...不对我用的这个 vuepress 就是个 SSG 。。

其实还有哇，虽然我博客 vuepress 主体的文档部分是 SSG，可评论、搜索功能，都要，有另外接入的后端服务来做的。

### 2023-01-18

nuxt 踩坑。\
我才知道，next nuxt 它们做的并不只是 ssr ...而是把一大坨各自的开发工具自动集成起来......ssr ssg或者单纯的spa啥的都算是特别的一部分。只是需要 ssr 的话...也并不一定要 nuxt，只是 nuxt 比较开箱即用。（但这个箱我不太会开啊...

vue 本身就有支持 ssr 的那堆东西了 [https://cn.vuejs.org/guide/scaling-up/ssr.html]

nuxt 的项目初始化好像是需要从外网上拉东西...就，可能需要使用一下魔法，或者改 host 之类的。\
而且...目前 nuxt3 的初始化模板，好像，有，点，问题，但我也不确定，毕竟我不太会用。

就是用来 vue 写没错，除了常规的组件库，axios 等等，小工具们比较别致的主要有路由、布局，“内容”(这个能用来做博客文章的渲染...)，还有些小的像自动导入。\
那些 vue 的插件我之前也见过，弄博客的时候md转html也知道...但是突然都混在一起感觉好神奇（？

- [https://github.com/hannoeru/vite-plugin-pages]
- [https://github.com/JohnCampionJr/vite-plugin-vue-layouts]
- [https://github.com/antfu/unplugin-vue-components]

还有一件事，初始化项目，yarn 用 create，npm 用 init，npx的create是和之后的nuxt直接连在一起的...这堆玩意是真有够混乱的。\
还有该死的网络问题...挂梯子反而也有问题...真tm折腾人。

- [https://nuxt.new/]
- [https://zhuanlan.zhihu.com/p/535230945]
- [https://github.com/nuxt/starter]

---
cms 内容管理系统。经典的像 wordpress。\
我不确定...到底有多方便，手动写后台，差很多吗...\

我在想...之前想的三个也许，可以，一块整。\
切网页，也要熟悉工具先不是...？\
试水。

感觉...拆模块的一个要点...是防火墙，是可以有混乱的代码的，甚至有时混乱复杂也是必要的，（比如动作游戏的“手感”，就是一堆，难以测试难以控制的部分，就是 tmd 玄学，丢那里就好了，别管太多；另一个就是业务流程本身的复杂度，如果不用代码的长度与复杂来体现，那代码可能更难懂）但是不要让这部分混乱影响到别的地方。\
然后才是，控制单文件大小，写测试，bulabula。

今天试试搞 demo 。进一步，再是重开网盘的那个坑。再然后是掘金，一起做东西。毕竟我没试过正经做过什么。\
至于那个笔记和打卡...日了，不想看。

[计划](../practice/drag-and-drop.md/#2023-01-13)

- ESLint [https://juejin.cn/post/7012798266089668645]
- Prettier [https://juejin.cn/post/6970267363845341220]

AST 是什么....
解析器..parser..compiler..嚯。

测试

[https://juejin.cn/post/6844904194600599560]

- Jest [https://juejin.cn/post/6844904196244766728]
- Cypress [https://juejin.cn/post/6995520480711016479]

唔...都是，node里的，npm包。具体去做的话，安装命令，配置文件...之类的，都，差不多。

就，有关测试，这应该算是三个粒度的测试了，ESLint和Prettier是很细的，和语言编译器内置的 debug 很近的那种，Jest是一个函数一个对象一个模块这种的，而Cypress上升到一个功能的。\
再有一个就是，测试要做的是，保证正确性，以及出现错误时能快速定位。\
还有一些，有些错误即使报了我们也不想管，或者压根就不该在某些地方写测试；另一些，关于定位问题，不仅仅是测试...和代码的模块划分的质量也很相关...\
呼...就是，这些也没那么神秘。

我也好想有人一起玩...就算漫无目的，有人一起的话...无聊的在街上逛，晒太阳......\
说起来我把日记这种东西像随地大小便一样到处放是不是不太好...\
以后有机会应该重新整理一下。
